// Article Data
const articles = [
  {
    id: 1,
    title: "Transformasi Digital dalam Pendidikan Indonesia",
    category: "Pendidikan",
    category_color: "#3498DB",
    excerpt: "Bagaimana teknologi mengubah lanskap pendidikan di Indonesia dan tantangan yang dihadapi dalam implementasinya.",
    content: `<p>Transformasi digital dalam pendidikan bukan lagi sekadar wacana, melainkan kebutuhan mendesak. Pandemi COVID-19 telah mempercepat adopsi teknologi dalam proses belajar mengajar, memaksa institusi pendidikan untuk beradaptasi dengan cepat.</p>

<h2>Perubahan Paradigma Pembelajaran</h2>
<p>Pembelajaran konvensional yang berpusat pada guru (teacher-centered) kini bergeser menuju pembelajaran yang berpusat pada siswa (student-centered). Teknologi digital memungkinkan personalisasi pembelajaran, di mana setiap siswa dapat belajar sesuai dengan kecepatan dan gaya belajar mereka masing-masing.</p>

<h2>Tantangan Implementasi</h2>
<p>Meskipun potensinya besar, transformasi digital dalam pendidikan Indonesia menghadapi berbagai tantangan:</p>
<ul>
<li>Kesenjangan akses teknologi antara daerah urban dan rural</li>
<li>Keterbatasan infrastruktur internet</li>
<li>Kesiapan guru dalam mengadopsi teknologi pembelajaran</li>
<li>Biaya implementasi yang tinggi</li>
</ul>

<h2>Solusi dan Harapan</h2>
<p>Pemerintah dan stakeholder pendidikan perlu berkolaborasi untuk mengatasi tantangan tersebut. Investasi dalam infrastruktur digital, pelatihan guru, dan pengembangan konten pembelajaran digital yang berkualitas menjadi kunci kesuksesan transformasi digital pendidikan Indonesia.</p>

<blockquote>"Pendidikan adalah senjata paling ampuh yang dapat Anda gunakan untuk mengubah dunia." - Nelson Mandela</blockquote>

<p>Dengan komitmen yang kuat dan strategi yang tepat, transformasi digital dapat meningkatkan kualitas dan aksesibilitas pendidikan di Indonesia, menciptakan generasi yang lebih siap menghadapi tantangan abad ke-21.</p>`,
    image: "https://images.unsplash.com/photo-1501504905252-473c47e087f8?w=1200",
    author: "Dr. Ahmad Santoso",
    date: "2025-11-03",
    read_time: "5 menit",
    featured: true
  },
  {
    id: 2,
    title: "Kearifan Lokal di Era Globalisasi",
    category: "Sosial Budaya",
    category_color: "#27AE60",
    excerpt: "Mempertahankan nilai-nilai budaya lokal sambil beradaptasi dengan perubahan global merupakan tantangan besar masyarakat modern.",
    content: `<p>Di tengah arus globalisasi yang semakin deras, kearifan lokal menghadapi tantangan eksistensial. Bagaimana kita dapat mempertahankan warisan budaya sambil tetap relevan dengan perkembangan zaman?</p>

<h2>Nilai Universal dalam Kearifan Lokal</h2>
<p>Kearifan lokal mengandung nilai-nilai universal seperti gotong royong, penghormatan terhadap alam, dan harmoni sosial. Nilai-nilai ini tetap relevan dan bahkan sangat dibutuhkan dalam menghadapi tantangan global seperti perubahan iklim dan disintegrasi sosial.</p>

<h2>Strategi Pelestarian</h2>
<p>Pelestarian kearifan lokal memerlukan pendekatan yang dinamis:</p>
<ul>
<li>Dokumentasi dan digitalisasi warisan budaya</li>
<li>Integrasi dalam kurikulum pendidikan formal</li>
<li>Adaptasi dengan konteks modern tanpa kehilangan esensi</li>
<li>Pemberdayaan komunitas lokal sebagai penjaga budaya</li>
</ul>

<h2>Peran Generasi Muda</h2>
<p>Generasi muda memiliki peran krusial dalam menjaga kelangsungan kearifan lokal. Mereka dapat menjadi jembatan antara tradisi dan modernitas, mengemas nilai-nilai tradisional dalam bentuk yang menarik bagi audiens kontemporer.</p>

<blockquote>"Budaya adalah akar dari identitas kita, tanpa akar, pohon tidak dapat tumbuh."</blockquote>

<p>Globalisasi tidak harus berarti homogenisasi budaya. Justru dalam keberagaman kearifan lokal, kita menemukan kekayaan yang membuat dunia lebih berwarna dan bermakna.</p>`,
    image: "https://images.unsplash.com/photo-1555854877-bab0e564b8d5?w=1200",
    author: "Dr. Siti Nurhaliza",
    date: "2025-11-02",
    read_time: "7 menit",
    featured: false
  },
  {
    id: 3,
    title: "Ekonomi Syariah dan Kesejahteraan Umat",
    category: "Ekonomi",
    category_color: "#E67E22",
    excerpt: "Peran ekonomi syariah dalam meningkatkan kesejahteraan masyarakat dan mengurangi kesenjangan sosial.",
    content: `<p>Ekonomi syariah bukan sekadar sistem transaksi keuangan berbasis prinsip Islam, tetapi juga instrumen pemberdayaan ekonomi umat yang komprehensif.</p>

<h2>Prinsip Dasar Ekonomi Syariah</h2>
<p>Ekonomi syariah dibangun atas beberapa prinsip fundamental:</p>
<ul>
<li>Larangan riba (bunga)</li>
<li>Larangan gharar (ketidakpastian berlebihan)</li>
<li>Larangan maysir (spekulasi/judi)</li>
<li>Prinsip keadilan dan keseimbangan</li>
<li>Orientasi pada kesejahteraan bersama (maslahat)</li>
</ul>

<h2>Kontribusi terhadap Ekonomi Nasional</h2>
<p>Industri keuangan syariah di Indonesia telah menunjukkan pertumbuhan yang signifikan. Bank syariah, asuransi syariah, dan instrumen keuangan syariah lainnya berkontribusi pada stabilitas ekonomi dan inklusi keuangan.</p>

<h2>Pemberdayaan Ekonomi Kerakyatan</h2>
<p>Ekonomi syariah memiliki fokus kuat pada pemberdayaan ekonomi mikro dan UMKM. Skema pembiayaan seperti mudharabah dan musyarakah memungkinkan distribusi risiko yang lebih adil dan pemberdayaan pengusaha kecil.</p>

<blockquote>"Ekonomi yang baik adalah ekonomi yang membawa berkah bagi semua pihak."</blockquote>

<h2>Tantangan dan Prospek</h2>
<p>Meskipun prospektif, ekonomi syariah masih menghadapi tantangan dalam hal edukasi masyarakat, standarisasi produk, dan sumber daya manusia yang kompeten. Kolaborasi antara pemerintah, akademisi, dan praktisi diperlukan untuk mengoptimalkan potensi ekonomi syariah.</p>

<p>Dengan pendekatan yang holistik, ekonomi syariah dapat menjadi alternatif yang tidak hanya menguntungkan secara finansial, tetapi juga membawa dampak sosial yang positif.</p>`,
    image: "https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?w=1200",
    author: "Prof. Muhammad Arif",
    date: "2025-11-01",
    read_time: "6 menit",
    featured: false
  },
  {
    id: 4,
    title: "Metode Pembelajaran Aktif di Perguruan Tinggi",
    category: "Pendidikan",
    category_color: "#3498DB",
    excerpt: "Student-centered learning sebagai pendekatan efektif meningkatkan kualitas pembelajaran di kampus.",
    content: `<p>Paradigma pembelajaran telah bergeser dari teacher-centered menuju student-centered learning. Metode pembelajaran aktif menempatkan mahasiswa sebagai subjek utama dalam proses pembelajaran.</p>

<h2>Karakteristik Pembelajaran Aktif</h2>
<p>Pembelajaran aktif melibatkan mahasiswa secara langsung dalam konstruksi pengetahuan melalui:</p>
<ul>
<li>Diskusi kelompok dan kolaborasi</li>
<li>Problem-based learning</li>
<li>Project-based learning</li>
<li>Case study analysis</li>
<li>Presentasi dan peer teaching</li>
</ul>

<h2>Manfaat bagi Mahasiswa</h2>
<p>Penelitian menunjukkan bahwa pembelajaran aktif meningkatkan retensi pengetahuan, mengembangkan critical thinking, dan mempersiapkan mahasiswa untuk dunia kerja yang dinamis. Mahasiswa tidak hanya mengingat informasi, tetapi memahami dan mampu mengaplikasikan pengetahuan.</p>

<h2>Peran Dosen sebagai Fasilitator</h2>
<p>Dalam pembelajaran aktif, dosen berperan sebagai fasilitator yang membimbing proses pembelajaran. Dosen merancang aktivitas yang mendorong mahasiswa untuk berpikir kritis, berkolaborasi, dan memecahkan masalah.</p>

<blockquote>"Tell me and I forget, teach me and I may remember, involve me and I learn." - Benjamin Franklin</blockquote>

<h2>Implementasi di Era Digital</h2>
<p>Teknologi digital membuka peluang baru untuk pembelajaran aktif. Platform online, virtual simulation, dan collaborative tools memungkinkan pembelajaran yang lebih interaktif dan fleksibel.</p>

<p>Perguruan tinggi yang mengadopsi metode pembelajaran aktif tidak hanya menghasilkan lulusan yang kompeten, tetapi juga individu yang mandiri, adaptif, dan siap menghadapi tantangan masa depan.</p>`,
    image: "https://images.unsplash.com/photo-1523240795612-9a054b0db644?w=1200",
    author: "Dr. Rina Wijaya",
    date: "2025-10-30",
    read_time: "8 menit",
    featured: false
  },
  {
    id: 5,
    title: "Revitalisasi Pasar Tradisional dalam Ekonomi Modern",
    category: "Ekonomi",
    category_color: "#E67E22",
    excerpt: "Strategi menghidupkan kembali pasar tradisional agar tetap relevan di tengah gempuran ritel modern.",
    content: `<p>Pasar tradisional merupakan jantung ekonomi kerakyatan. Namun, keberadaannya kini terancam oleh modernisasi dan perubahan pola konsumsi masyarakat.</p>

<h2>Nilai Strategis Pasar Tradisional</h2>
<p>Pasar tradisional memiliki nilai strategis yang tidak dapat digantikan:</p>
<ul>
<li>Pusat ekonomi rakyat dan pedagang kecil</li>
<li>Menjaga harga produk tetap terjangkau</li>
<li>Tempat interaksi sosial dan budaya</li>
<li>Penyerap tenaga kerja yang signifikan</li>
<li>Pendukung produk lokal dan UMKM</li>
</ul>

<h2>Tantangan yang Dihadapi</h2>
<p>Pasar tradisional menghadapi berbagai tantangan: kondisi infrastruktur yang kurang memadai, manajemen yang tradisional, persaingan dengan ritel modern, dan perubahan preferensi konsumen yang menginginkan kenyamanan dan kebersihan.</p>

<h2>Strategi Revitalisasi</h2>
<p>Revitalisasi pasar tradisional memerlukan pendekatan komprehensif:</p>
<ul>
<li>Perbaikan infrastruktur dan sanitasi</li>
<li>Digitalisasi sistem pembayaran dan manajemen</li>
<li>Pelatihan pedagang dalam customer service</li>
<li>Pengembangan brand dan marketing</li>
<li>Integrasi dengan platform e-commerce</li>
</ul>

<blockquote>"Pasar tradisional adalah cerminan dari kearifan ekonomi lokal yang harus kita jaga."</blockquote>

<h2>Model Sukses</h2>
<p>Beberapa pasar tradisional telah berhasil bertransformasi dengan mempertahankan karakter tradisional sambil mengadopsi standar modern. Pasar-pasar ini menjadi destinasi wisata kuliner dan belanja yang menarik.</p>

<p>Dengan strategi yang tepat, pasar tradisional tidak hanya dapat bertahan, tetapi juga berkembang sebagai pusat ekonomi yang kompetitif dan berkelanjutan.</p>`,
    image: "https://images.unsplash.com/photo-1555529669-e69e7aa0ba9a?w=1200",
    author: "Ir. Bambang Susilo",
    date: "2025-10-28",
    read_time: "5 menit",
    featured: false
  },
  {
    id: 6,
    title: "Pelestarian Bahasa Daerah di Sekolah",
    category: "Sosial Budaya",
    category_color: "#27AE60",
    excerpt: "Upaya mempertahankan bahasa daerah melalui kurikulum pendidikan formal.",
    content: `<p>Bahasa daerah merupakan identitas budaya yang harus dilestarikan. Integrasi bahasa daerah dalam kurikulum sekolah menjadi salah satu strategi penting dalam upaya pelestarian ini.</p>

<h2>Ancaman Kepunahan Bahasa Daerah</h2>
<p>UNESCO mencatat bahwa banyak bahasa daerah di Indonesia terancam punah. Dominasi bahasa nasional dan bahasa asing, urbanisasi, dan perubahan gaya hidup menjadi faktor utama.</p>

<h2>Pentingnya Bahasa Daerah</h2>
<p>Bahasa daerah bukan sekadar alat komunikasi, tetapi juga:</p>
<ul>
<li>Wadah ekspresi budaya dan kearifan lokal</li>
<li>Identitas dan jati diri komunitas</li>
<li>Media transmisi nilai-nilai tradisional</li>
<li>Keberagaman linguistik yang memperkaya bangsa</li>
</ul>

<h2>Strategi Pembelajaran di Sekolah</h2>
<p>Pembelajaran bahasa daerah perlu dirancang menarik dan relevan:</p>
<ul>
<li>Metode pembelajaran yang interaktif dan menyenangkan</li>
<li>Integrasi dengan mata pelajaran lain</li>
<li>Penggunaan teknologi dan media digital</li>
<li>Keterlibatan tokoh masyarakat dan budayawan</li>
<li>Kompetisi dan festival bahasa daerah</li>
</ul>

<blockquote>"Kehilangan bahasa adalah kehilangan bagian dari warisan kemanusiaan."</blockquote>

<h2>Peran Keluarga dan Masyarakat</h2>
<p>Sekolah tidak dapat bekerja sendiri. Keluarga harus menjadi lingkungan pertama di mana anak-anak terpapar bahasa daerah. Masyarakat juga perlu menciptakan ruang-ruang penggunaan bahasa daerah dalam kehidupan sehari-hari.</p>

<p>Dengan komitmen bersama dari pemerintah, sekolah, keluarga, dan masyarakat, bahasa daerah dapat terus hidup dan berkembang sebagai kekayaan budaya bangsa.</p>`,
    image: "https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=1200",
    author: "Dra. Kartini Rahayu",
    date: "2025-10-25",
    read_time: "6 menit",
    featured: false
  }
];

// Application State
const app = {
  currentPage: 'home',
  currentCategory: null,
  searchQuery: '',
  
  // Initialize app
  init() {
    this.renderArticles();
    this.updateCategoryCounts();
    this.setupEventListeners();
    this.setupScrollEffects();
  },
  
  // Render articles
  renderArticles(filterCategory = null, searchQuery = null) {
    const grid = document.getElementById('articlesGrid');
    let articlesToRender = articles.filter(a => !a.featured);
    
    if (filterCategory) {
      articlesToRender = articlesToRender.filter(a => a.category === filterCategory);
    }
    
    if (searchQuery) {
      const query = searchQuery.toLowerCase();
      articlesToRender = articlesToRender.filter(a => 
        a.title.toLowerCase().includes(query) ||
        a.excerpt.toLowerCase().includes(query) ||
        a.category.toLowerCase().includes(query) ||
        a.content.toLowerCase().includes(query)
      );
    }
    
    if (articlesToRender.length === 0) {
      grid.innerHTML = '<div class="no-results"><h3>Tidak ada artikel ditemukan</h3><p>Coba kata kunci atau kategori lain</p></div>';
      return;
    }
    
    grid.innerHTML = articlesToRender.map(article => `
      <div class="article-card" onclick="app.showArticle(${article.id})">
        <img src="${article.image}" alt="${article.title}" class="article-image" loading="lazy">
        <div class="article-content">
          <span class="category-badge" style="background-color: ${article.category_color};">${article.category}</span>
          <h3>${article.title}</h3>
          <p class="article-excerpt">${article.excerpt}</p>
          <div class="article-meta">
            <span>${article.author}</span>
            <span>${article.read_time}</span>
          </div>
        </div>
      </div>
    `).join('');
  },
  
  // Show article detail
  showArticle(id) {
    const article = articles.find(a => a.id === id);
    if (!article) return;
    
    const detailContainer = document.getElementById('articleDetail');
    const relatedArticles = articles
      .filter(a => a.id !== id && a.category === article.category)
      .slice(0, 3);
    
    detailContainer.innerHTML = `
      <div class="back-button">
        <button class="btn-secondary" onclick="app.navigateToPage('home')">‚Üê Kembali ke Home</button>
      </div>
      
      <img src="${article.image}" alt="${article.title}" class="article-hero-image">
      
      <div class="article-header">
        <span class="category-badge" style="background-color: ${article.category_color};">${article.category}</span>
        <h1>${article.title}</h1>
        <div class="article-info">
          <span>‚úçÔ∏è ${article.author}</span>
          <span>üìÖ ${this.formatDate(article.date)}</span>
          <span>‚è±Ô∏è ${article.read_time}</span>
        </div>
      </div>
      
      <div class="article-body">
        ${article.content}
      </div>
      
      <div class="share-section">
        <h3>Bagikan Artikel</h3>
        <div class="share-buttons">
          <button class="share-btn" onclick="app.shareArticle('twitter', '${article.title}')">üê¶ Twitter</button>
          <button class="share-btn" onclick="app.shareArticle('facebook', '${article.title}')">üìò Facebook</button>
          <button class="share-btn" onclick="app.shareArticle('linkedin', '${article.title}')">üíº LinkedIn</button>
          <button class="share-btn" onclick="app.shareArticle('whatsapp', '${article.title}')">üí¨ WhatsApp</button>
        </div>
      </div>
      
      ${relatedArticles.length > 0 ? `
        <div class="related-articles">
          <h3>Artikel Terkait</h3>
          <div class="articles-grid">
            ${relatedArticles.map(related => `
              <div class="article-card" onclick="app.showArticle(${related.id})">
                <img src="${related.image}" alt="${related.title}" class="article-image" loading="lazy">
                <div class="article-content">
                  <span class="category-badge" style="background-color: ${related.category_color};">${related.category}</span>
                  <h3>${related.title}</h3>
                  <p class="article-excerpt">${related.excerpt}</p>
                  <div class="article-meta">
                    <span>${related.author}</span>
                    <span>${related.read_time}</span>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      ` : ''}
    `;
    
    this.navigateToPage('article');
    window.scrollTo({ top: 0, behavior: 'smooth' });
  },
  
  // Show category page
  showCategory(category) {
    this.currentCategory = category;
    const categoryInfo = this.getCategoryInfo(category);
    
    const header = document.getElementById('categoryHeader');
    header.innerHTML = `
      <h1>${categoryInfo.icon} ${category}</h1>
      <p>${categoryInfo.description}</p>
    `;
    
    const grid = document.getElementById('categoryArticlesGrid');
    const categoryArticles = articles.filter(a => a.category === category);
    
    grid.innerHTML = categoryArticles.map(article => `
      <div class="article-card" onclick="app.showArticle(${article.id})">
        <img src="${article.image}" alt="${article.title}" class="article-image" loading="lazy">
        <div class="article-content">
          <span class="category-badge" style="background-color: ${article.category_color};">${article.category}</span>
          <h3>${article.title}</h3>
          <p class="article-excerpt">${article.excerpt}</p>
          <div class="article-meta">
            <span>${article.author}</span>
            <span>${article.read_time}</span>
          </div>
        </div>
      </div>
    `).join('');
    
    this.navigateToPage('category');
    window.scrollTo({ top: 0, behavior: 'smooth' });
  },
  
  // Navigate between pages
  navigateToPage(page) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(page + 'Page').classList.add('active');
    
    document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
    
    this.currentPage = page;
    
    // Close mobile menu if open
    document.getElementById('navMenu').classList.remove('active');
    document.getElementById('hamburger').classList.remove('active');
  },
  
  // Search functionality
  performSearch(query) {
    this.searchQuery = query;
    
    if (query.trim() === '') {
      this.navigateToPage('home');
      this.renderArticles();
      return;
    }
    
    this.navigateToPage('category');
    
    const header = document.getElementById('categoryHeader');
    header.innerHTML = `
      <h1>üîç Hasil Pencarian: "${query}"</h1>
      <p>Artikel yang cocok dengan pencarian Anda</p>
    `;
    
    const grid = document.getElementById('categoryArticlesGrid');
    const searchQuery = query.toLowerCase();
    const searchResults = articles.filter(a => 
      a.title.toLowerCase().includes(searchQuery) ||
      a.excerpt.toLowerCase().includes(searchQuery) ||
      a.category.toLowerCase().includes(searchQuery) ||
      a.content.toLowerCase().includes(searchQuery)
    );
    
    if (searchResults.length === 0) {
      grid.innerHTML = '<div class="no-results"><h3>Tidak ada artikel ditemukan</h3><p>Coba kata kunci lain</p></div>';
      return;
    }
    
    grid.innerHTML = searchResults.map(article => `
      <div class="article-card" onclick="app.showArticle(${article.id})">
        <img src="${article.image}" alt="${article.title}" class="article-image" loading="lazy">
        <div class="article-content">
          <span class="category-badge" style="background-color: ${article.category_color};">${article.category}</span>
          <h3>${article.title}</h3>
          <p class="article-excerpt">${article.excerpt}</p>
          <div class="article-meta">
            <span>${article.author}</span>
            <span>${article.read_time}</span>
          </div>
        </div>
      </div>
    `).join('');
  },
  
  // Update category counts
  updateCategoryCounts() {
    const counts = {
      'Pendidikan': 0,
      'Sosial Budaya': 0,
      'Ekonomi': 0
    };
    
    articles.forEach(article => {
      if (counts.hasOwnProperty(article.category)) {
        counts[article.category]++;
      }
    });
    
    document.getElementById('countPendidikan').textContent = `${counts['Pendidikan']} artikel`;
    const sosialBudayaElement = document.getElementById('countSosialBudaya');
    if (sosialBudayaElement) {
      sosialBudayaElement.textContent = `${counts['Sosial Budaya']} artikel`;
    }
    document.getElementById('countEkonomi').textContent = `${counts['Ekonomi']} artikel`;
  },
  
  // Get category info
  getCategoryInfo(category) {
    const categoryMap = {
      'Pendidikan': {
        icon: 'üìö',
        description: 'Artikel dan opini seputar dunia pendidikan, metode pembelajaran, dan kebijakan pendidikan'
      },
      'Sosial Budaya': {
        icon: 'üåè',
        description: 'Pembahasan tentang dinamika sosial, budaya, tradisi, dan masyarakat'
      },
      'Ekonomi': {
        icon: 'üíº',
        description: 'Analisis ekonomi, kebijakan fiskal, dan pemberdayaan ekonomi masyarakat'
      }
    };
    return categoryMap[category] || { icon: 'üìÑ', description: '' };
  },
  
  // Format date
  formatDate(dateString) {
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    return new Date(dateString).toLocaleDateString('id-ID', options);
  },
  
  // Share article
  shareArticle(platform, title) {
    const url = window.location.href;
    const text = encodeURIComponent(title);
    
    const shareUrls = {
      twitter: `https://twitter.com/intent/tweet?text=${text}&url=${url}`,
      facebook: `https://www.facebook.com/sharer/sharer.php?u=${url}`,
      linkedin: `https://www.linkedin.com/sharing/share-offsite/?url=${url}`,
      whatsapp: `https://wa.me/?text=${text}%20${url}`
    };
    
    if (shareUrls[platform]) {
      window.open(shareUrls[platform], '_blank', 'width=600,height=400');
    }
  },
  
  // Setup event listeners
  setupEventListeners() {
    // Hamburger menu
    document.getElementById('hamburger').addEventListener('click', function() {
      this.classList.toggle('active');
      document.getElementById('navMenu').classList.toggle('active');
    });
    
    // Search toggle
    document.getElementById('searchToggle').addEventListener('click', () => {
      document.getElementById('searchBox').classList.toggle('active');
      document.getElementById('searchInput').focus();
    });
    
    document.getElementById('searchClose').addEventListener('click', () => {
      document.getElementById('searchBox').classList.remove('active');
      document.getElementById('searchInput').value = '';
    });
    
    // Search input
    let searchTimeout;
    document.getElementById('searchInput').addEventListener('input', (e) => {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => {
        this.performSearch(e.target.value);
      }, 500);
    });
    
    // Navigation links
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        
        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
        link.classList.add('active');
        
        if (link.dataset.page) {
          this.navigateToPage(link.dataset.page);
        } else if (link.dataset.category) {
          this.showCategory(link.dataset.category);
        }
      });
    });
    
    // Category cards
    document.querySelectorAll('.category-card').forEach(card => {
      card.addEventListener('click', () => {
        const category = card.dataset.category;
        this.showCategory(category);
      });
    });
    
    // Footer links
    document.querySelectorAll('.footer a[data-page], .footer a[data-category]').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        if (link.dataset.page) {
          this.navigateToPage(link.dataset.page);
        } else if (link.dataset.category) {
          this.showCategory(link.dataset.category);
        }
      });
    });
    
    // Back to top button
    const backToTop = document.getElementById('backToTop');
    backToTop.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  },
  
  // Setup scroll effects
  setupScrollEffects() {
    let lastScroll = 0;
    
    window.addEventListener('scroll', () => {
      const currentScroll = window.pageYOffset;
      
      // Back to top button
      const backToTop = document.getElementById('backToTop');
      if (currentScroll > 300) {
        backToTop.classList.add('visible');
      } else {
        backToTop.classList.remove('visible');
      }
      
      // Reading progress bar
      const readingProgress = document.getElementById('readingProgress');
      if (this.currentPage === 'article') {
        const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled = (winScroll / height) * 100;
        readingProgress.style.width = scrolled + '%';
      } else {
        readingProgress.style.width = '0';
      }
      
      lastScroll = currentScroll;
    });
  }
};

// Initialize app when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => app.init());
} else {
  app.init();
}